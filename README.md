# Robots-API

[![Maintainability](https://api.codeclimate.com/v1/badges/b218ae03a2b027e4b1a0/maintainability)](https://codeclimate.com/github/ilnarkz/robots_API/maintainability)


### Клонирование репозитория

```bash
git clone https://github.com/ilnarkz/robots_API
cd robots_API
```

### Активация виртуального окружения

```bash
python3 -m venv .venv
source .venv/bin/activate
```

### Установка зависимостей

```bash
make install
```

### Применение миграций

```bash
make migrate
```

## Запуск сервера

```bash
make start
```

# API-endpoints

```bash
GET / - Список произведённых на заводе роботов
POST / - Добавление нового робота
GET /orders/ - Список заказов на робота
POST /orders/ - Добавление нового заказа
```

При добавлении нового робота происходит валидация на соответствие существующим моделям. В случае существования такого робота в БД, в ответ пользователю отправляется ошибка, что такой робот уже существует.

При добавлении нового заказа, происходит запись заказа в БД и при создании робота с такой же моделью и версией как в заказе, на указанный email отправляется письмо с уведомлением, что такой робот появился.

Помимо этого ведется запись в excel файл в корне приложения. При создании робота(неважно существует он в БД или нет) в файл excel для указанной модели и версии прибавляется количество созданных роботов на 1. Файл excel подразделяется на листы по названиям модели.